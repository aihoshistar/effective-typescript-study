# ğŸ“‚ [Week 1] Item 16~18: íƒ€ì… ì„¤ê³„ì™€ ë¶ˆë³€ì„± ì œì–´

## ğŸ·ï¸ Metadata

- **í•™ìŠµì¼:** 2025ë…„ 12ì›” 23ì¼
- **ì£¼ì°¨:** #Week1
- **í‚¤ì›Œë“œ:** #TypeScript #numberì¸ë±ìŠ¤ #readonly #ë§¤í•‘ëœíƒ€ì… #ë°ì´í„°ë™ê¸°í™”

## ğŸš€ í•µì‹¬ ìš”ì•½

> [!abstract] ì´ ì„¹ì…˜ì˜ í•µì‹¬ í•œ ì¤„
>
> ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ë°°ì—´ ë° ê°ì²´ ë™ì‘ íŠ¹ì„±(ì¸ë±ìŠ¤, ë°˜ë³µë¬¸)ì„ ì´í•´í•˜ì—¬ ì ì ˆí•œ íƒ€ì…ì„ ì‚¬ìš©í•˜ê³ , readonlyì™€ ë§¤í•‘ëœ íƒ€ì…ì„ í†µí•´ ë°ì´í„°ì˜ ë¶ˆë³€ì„±ê³¼ ë¡œì§ì˜ ë™ê¸°í™”ë¥¼ ì»´íŒŒì¼ íƒ€ì„ì— ê°•ì œí•  ìˆ˜ ìˆë„ë¡ ì˜ í™œìš©í•œë‹¤.

## âœï¸ ì£¼ìš” ë‚´ìš© ì •ë¦¬

### Item 16. number ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë³´ë‹¤ëŠ” Array, Tuple, ArrayLike ì‚¬ìš©í•˜ê¸°

- ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì´ìƒí•˜ê²Œ ë™ì‘í•˜ê¸°ë¡œ ìœ ëª…í•œ ì–¸ì–´ì´ë‹¤.
    - '0' == 0 ì´ë‹¤. (ì•”ì‹œì  íƒ€ì… ê°•ì œ)
    - ë•Œë¬¸ì— ===, !== ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ì˜ í‚¤ëŠ” í•­ìƒ ë¬¸ìì—´: ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ê°ì²´ì˜ í‚¤ë¡œ ìˆ«ìë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ì‹¤ì œë¡œëŠ” ë¬¸ìì—´ë¡œ ë³€í™˜ë˜ì–´ ì €ì¥ëœë‹¤. ë°°ì—´ë„ ê°ì²´ì´ë¯€ë¡œ ì¸ë±ìŠ¤ëŠ” ì‚¬ì‹¤ ë¬¸ìì—´ì´ë‹¤.
    - ES2015ë¶€í„°ëŠ” í‚¤ì— ë¬¸ìì—´ë¿ë§Œ ì•„ë‹ˆë¼ ì‹¬ë³¼ë„ ì§€ì›í•œë‹¤.
    - í•´ì‹œ ê°€ëŠ¥ ê°ì²´ í‘œí˜„ì´ ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ëŠ” ì—†ë‹¤.
- íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ ê°€ìƒ ìˆ«ì ì¸ë±ìŠ¤: íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” í˜¼ë€ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ìˆ«ì í‚¤ë¥¼ í—ˆìš©í•˜ë©°, ë°°ì—´ì˜ ì¸ë±ìŠ¤ ì ‘ê·¼ ì‹œ ìˆ«ìë¥¼ ê¸°ëŒ€í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆë‹¤. ì´ëŠ” ëŸ°íƒ€ì„ì˜ ë¬¸ìì—´ ë³€í™˜ ì´ìŠˆë¥¼ íƒ€ì… ë ˆë²¨ì—ì„œ ê°€ë ¤ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.
- ìˆœíšŒ ë°©ì‹ì˜ ì°¨ì´:
    - for-in ë£¨í”„ëŠ” í‚¤ê°€ ë¬¸ìì—´ë¡œ ì¶œë ¥ë˜ë©°, í”„ë¡œí† íƒ€ì… ì²´ì¸ì˜ ì†ì„±ê¹Œì§€ ìˆœíšŒí•  ìˆ˜ ìˆì–´ ë°°ì—´ ìˆœíšŒì—ëŠ” ë¶€ì í•©í•˜ë‹¤.
    - ì¸ë±ìŠ¤ê°€ í•„ìš”í•˜ë‹¤ë©´ for(let i=0; ...) í˜¹ì€ Array.prototype.forEachë¥¼ ì‚¬ìš©í•˜ê³ , ì¸ë±ìŠ¤ê°€ í•„ìš” ì—†ë‹¤ë©´ for-ofë¥¼ ì‚¬ìš©í•œë‹¤.

```js
const obj = { a: 1, b: 2, c: 3 };
for (const key in obj) {
  console.log(key); // "a", "b", "c" ì¶œë ¥ (ì†ì„± í‚¤)
}

const arr = ['apple', 'banana'];
for (const index in arr) {
  console.log(index); // "0", "1" ì¶œë ¥ (ë¬¸ìì—´ ì¸ë±ìŠ¤)
  console.log(arr[index]); // "apple", "banana" ì¶œë ¥ (ê°’)
}
```

- ë°˜ë³µë¬¸ ì„±ëŠ¥ì€ ì „í†µì ì¸ forë¬¸ì´ ê°€ì¥ ë¹ ë¥´ë©°, forEach, for...of ìˆœìœ¼ë¡œ ì„±ëŠ¥ì´ ì €í•˜ë˜ëŠ” ê²½í–¥ì´ ìˆë‹¤.
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ `async/await`ì™€ `ë°˜ë³µë¬¸`ì„ í•¨ê»˜ ì‚¬ìš©í•  ë•ŒëŠ” `forEach`ëŠ” `ë¹„ë™ê¸° í•¨ìˆ˜`ë¥¼ ê¸°ë‹¤ë ¤ì£¼ì§€ ì•Šì•„ ìˆœì°¨ ì²˜ë¦¬ê°€ ì•ˆ ë˜ë¯€ë¡œ, `for...of`, `for ë£¨í”„`ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜, `map`ê³¼ `Promise.all()`ì„ ì¡°í•©í•˜ì—¬ ë³‘ë ¬ ì²˜ë¦¬ë¥¼ í•´ì•¼í•œë‹¤.
    - `forEach`ì— `async`ë¥¼ ë¶™ì—¬ë„ ë™ì‹œ ë‹¤ë°œì ìœ¼ë¡œ ì‹¤í–‰ë˜ë©°, **awaitëŠ” ë£¨í”„ ì „ì²´ê°€ ì•„ë‹Œ ê° ë¹„ë™ê¸° ì½œë°± ë‚´ë¶€ì—ì„œë§Œ ë™ì‘**í•˜ê¸° ë•Œë¬¸ì— ì˜ˆìƒì¹˜ ëª»í•œ ê²°ê³¼ë¥¼ ì´ˆë˜í•©ë‹ˆë‹¤
- ìˆ«ì ì¸ë±ìŠ¤ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì§ì ‘ ì •ì˜í•˜ê¸°ë³´ë‹¤ ì´ë¯¸ ìµœì í™”ëœ Array, Tuple, ë˜ëŠ” ArrayLike(ì¸ë±ìŠ¤ ì ‘ê·¼ì€ ë˜ì§€ë§Œ ë°°ì—´ ë©”ì„œë“œëŠ” ì—†ëŠ” ê²½ìš°) íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•ˆì „í•˜ë‹¤.

### Item 17. ë³€ê²½ ê°€ëŠ¥ì„± ì œì–´í•˜ê¸° (readonly)

- readonlyì˜ ëª©ì : í•¨ìˆ˜ê°€ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì€ ê°ì²´ë‚˜ ë°°ì—´ì„ ìˆ˜ì •í•˜ì§€ ëª»í•˜ê²Œ ë§‰ì•„ **ë¶€ìˆ˜ íš¨ê³¼(Side Effect)** ë¥¼ ë°©ì§€í•œë‹¤.
    - íƒ€ì…ì•ˆì „ì„± ì¦ê°€, ì§€ì—­ ë³€ìˆ˜ì™€ ê´€ë ¨ëœ ì˜¤ë¥˜ë¥¼ ë°©ì§€
    - `readonly number[]`ëŠ” ìš”ì†Œë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•˜ëŠ” ë©”ì„œë“œ(`push`, `sort` ë“±)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ê²Œ í•˜ë©°, ìš”ì†Œì— ìƒˆë¡œìš´ ê°’ì„ í• ë‹¹í•˜ëŠ” ê²ƒë„ ë§‰ëŠ”ë‹¤.
- í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ë§¤ê°œë³€ìˆ˜ë¥¼ ìˆ˜ì •í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ `readonly`ë¥¼ ì¶”ê°€í•´ì•¼ í•œë‹¤.
    - `readonly`ê°€ ì•„ë‹Œ ì¼ë°˜ íƒ€ì…ì„ `readonly` íƒ€ì…ì— í• ë‹¹í•  ìˆ˜ ìˆì§€ë§Œ ê·¸ ë°˜ëŒ€ëŠ” ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— íƒ€ì… ì•ˆì „ì„±ì´ ê³„ì¸µì ìœ¼ë¡œ ì „íŒŒëœë‹¤.
- `readonly`ëŠ” ì–•ê²Œ(shallow) ë™ì‘í•œë‹¤.
    - readonlyëŠ” ì§ê³„ ì†ì„±ë§Œ ë³´í˜¸í•œë‹¤. ê°ì²´ ë‚´ë¶€ì˜ ê°ì²´ê°€ ìˆë‹¤ë©´ ê·¸ ë‚´ë¶€ ê°’ì€ ì—¬ì „íˆ ìˆ˜ì • ê°€ëŠ¥í•˜ë‹¤.
    - í•„ìš” ì‹œ Readonly(ìœ í‹¸ë¦¬í‹° íƒ€ì…)ì´ë‚˜ DeppReadonly(ë¼ì´ë¸ŒëŸ¬ë¦¬)ë¥¼ ê³ ë ¤í•´ì•¼ í•œë‹¤.
- const vs readonly
    - const: ë³€ìˆ˜ ì°¸ì¡° ìì²´ì˜ ì¬í• ë‹¹ì„ ë§‰ì§€ë§Œ, ë³€ìˆ˜ê°€ ê°€ë¦¬í‚¤ëŠ” ê°ì²´ ë‚´ë¶€ ê°’ì€ ìˆ˜ì •ì´ ê°€ëŠ¥í•˜ë‹¤
    - readonly: ì†ì„±(Property)ì˜ ìˆ˜ì •ì„ ë§‰ëŠ”ë‹¤. ê°ì²´ë‚˜ ë°°ì—´ ë‚´ë¶€ì˜ ê°’ì´ ë°”ë€ŒëŠ” ê²ƒì„ ë°©ì§€í•œë‹¤.
- readonly number[]
    - number[]ì˜ ì„œë¸Œíƒ€ì…ì´ë‹¤. ë³€ê²½ ê°€ëŠ¥í•œ ë°°ì—´ì€ readonly number[] ì— í• ë‹¹ ê°€ëŠ¥í•˜ì§€ë§Œ, ê·¸ ë°˜ëŒ€ëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤.
    - push, pop, splice ë“± ì›ë³¸ì„ ìˆ˜ì •í•˜ëŠ” ë©”ì„œë“œê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - length ì†ì„±ì¡°ì°¨ ì½ê¸° ì „ìš©ìœ¼ë¡œ ì·¨ê¸‰ë˜ì–´ ë°°ì—´ í¬ê¸° ë³€ê²½ì„ ì›ì²œ ì°¨ë‹¨í•œë‹¤.

### Item 18. ë§¤í•‘ëœ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ ê°’ì„ ë™ê¸°í™”í•˜ê¸°

- **ì‹¤íŒ¨ì— ì—´ë¦° ì ‘ê·¼ë²• (Fail-Open) vs ë‹«íŒ ì ‘ê·¼ë²• (Fail-Close)**
    - **Fail-Open**: ì‹œìŠ¤í…œ ì˜¤ë¥˜ ì‹œì—ë„ ë™ì‘ì„ ê³„ì† í—ˆìš©í•˜ì—¬ ê°€ìš©ì„±ì„ ìš°ì„ í•˜ëŠ” ë°©ì‹(ì˜ˆ: ì˜¤ë¥˜ ì‹œì—ë„ í˜ì´ì§€ëŠ” ê³„ì† ì—´ë¦¼)ì´ë‹¤.
    - **Fail-Close**:ì˜¤ë¥˜ ë°œìƒ ì‹œ ì‹œìŠ¤í…œì´ ì‘ë™ì„ ë©ˆì¶”ê³  ì ‘ê·¼ì„ ì°¨ë‹¨í•˜ì—¬ ë³´ì•ˆì„ ìš°ì„ í•˜ëŠ” ë°©ì‹(ì˜ˆ: ì¸ì¦ ì˜¤ë¥˜ ì‹œ ì ‘ê·¼ ì°¨ë‹¨)ì´ë‹¤. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì—ì„œëŠ” ì†ì„±ì´ ì¶”ê°€ë˜ë©´ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ê°œë°œìê°€ ì¸ì§€í•˜ê³  ìˆ˜ì •í•˜ê²Œ ë§Œë“ ë‹¤.
- **ë§¤í•‘ëœ íƒ€ì…(`[K in keyof T]`)ì˜ í™œìš©**:
    - ë§¤í•‘ëœ íƒ€ì…ì„ ì‚¬ìš©í•˜ì—¬ **ë°ì´í„°ì˜ ì†ì„± ëª©ë¡**ê³¼ **ë¡œì§ì— í•„ìš”í•œ ì†ì„± ëª©ë¡**ì„ ê°•ì œë¡œ ë™ê¸°í™”í•œë‹¤.
    - `keyof T`ëŠ” ê°ì²´ `T`ì˜ ëª¨ë“  í‚¤ë¥¼ ìœ ë‹ˆì˜¨ìœ¼ë¡œ ê°€ì ¸ì˜¤ë¯€ë¡œ, `T`ì— ìƒˆë¡œìš´ í‚¤ê°€ ì¶”ê°€ë˜ë©´ ë§¤í•‘ëœ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ” ê°ì²´ì—ì„œë„ í•´ë‹¹ í‚¤ë¥¼ ìš”êµ¬í•˜ê²Œ ëœë‹¤.
- íƒ€ì… ì‹œìŠ¤í…œì´ ë³€ê²½ ì‚¬í•­ì„ ì¶”ì í•˜ê²Œ í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ì„ ê·¹ëŒ€í™”í•˜ëŠ” ì„¤ê³„ ë°©ì‹ì´ë‹¤.

## ğŸ’» ì½”ë“œ ì˜ˆì‹œ

**âŒ ì§€ì–‘í•´ì•¼ í•  ì½”ë“œ**

TypeScript

```ts
// 1. for-in ë£¨í”„ë¡œ ë°°ì—´ ìˆœíšŒ (Item 16)
const arr = [10, 20, 30];
for (const i in arr) {
  // iëŠ” "0", "1", "2" ë¬¸ìì—´ì„. ë§Œì•½ ì—°ì‚°ì„ í•˜ë©´ "0" + 1 = "01"ì´ ë¨.
  // í”„ë¡œí† íƒ€ì…ì— ì¶”ê°€ëœ ë©”ì„œë“œê¹Œì§€ ìˆœíšŒí•  ìœ„í—˜ì´ ìˆìŒ.
  console.log(i); 
}

// 2. ë§¤ê°œë³€ìˆ˜ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì—¬ ë¶€ìˆ˜ íš¨ê³¼ ë°œìƒ (Item 17)
const n = 10;
const numbs = [20,10, 30];
function printTriangles(n: number, nums: number[]) {
  const numsCopy = nums; // ì°¸ì¡°ë§Œ ë³µì‚¬ë¨ (ì–•ì€ ë³µì‚¬ë„ ì•„ë‹˜)
  numsCopy.sort(); // ì›ë³¸ nums ë°°ì—´ë„ í•¨ê»˜ ì •ë ¬ë˜ì–´ ë²„ë¦¼ (Side Effect)
}
printTriangles(n, numbs);
console.log(numbs); // 10, 20, 30

// 3. ì†ì„± ì¶”ê°€ ì‹œ ë¡œì§ ëˆ„ë½ ìœ„í—˜ (Item 18 - Fail-Open)
interface ScatterProps {
  x: number[];
  y: number[];
  color: string; // ë‚˜ì¤‘ì— ì¶”ê°€ëœ ì†ì„±
}

function shouldUpdate(oldProps: ScatterProps, newProps: ScatterProps) {
  // color ë¹„êµ ë¡œì§ì´ ëˆ„ë½ë˜ì—ˆì§€ë§Œ ì»´íŒŒì¼ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ.
  // colorë§Œ ë³€ê²½ë˜ì—ˆì„ ë•Œ í™”ë©´ì´ ê°±ì‹ ë˜ì§€ ì•ŠëŠ” ë²„ê·¸ ë°œìƒ.
  return oldProps.x !== newProps.x || oldProps.y !== newProps.y;
}

```

**âœ… ì§€í–¥í•´ì•¼ í•  ì½”ë“œ**

TypeScript

```ts
// 1. Array íƒ€ì…ê³¼ for-of ì‚¬ìš© (Item 16)
const arr = [10, 20, 30];
for (const val of arr) {
  console.log(val); // ê°’(number)ì— ì§ì ‘ ì ‘ê·¼
}
arr.forEach((val, i) => console.log(val, i)); // ì¸ë±ìŠ¤ê°€ í•„ìš”í•  ë•Œ

// 2. readonlyë¡œ ì›ë³¸ ë°ì´í„° ë³´í˜¸ (Item 17)
function printTrianglesSafe(n: number, nums: readonly number[]) {
  // nums.sort(); // âŒ Error: 'readonly number[]' í˜•ì‹ì— 'sort' ì†ì„±ì´ ì—†ìŠµë‹ˆë‹¤.
  const numsCopy = [...nums]; // ëª…ì‹œì ì¸ ë³µì‚¬ë³¸ ìƒì„±
  numsCopy.sort(); // ë³µì‚¬ë³¸ì€ ìˆ˜ì • ê°€ëŠ¥
}

// 3. ë§¤í•‘ëœ íƒ€ì…ìœ¼ë¡œ ë™ê¸°í™” ê°•ì œ (Item 18 - Fail-Close)
interface ScatterProps {
  x: number[];
  y: number[];
  color: string;
}

// ScatterPropsì˜ ëª¨ë“  í‚¤ë¥¼ í¬í•¨í•´ì•¼ í•˜ë„ë¡ ê°•ì œí•¨
const REQUIRES_UPDATE: {[k in keyof ScatterProps]: boolean} = {
  x: true,
  y: true,
  color: true, // ë§Œì•½ ì´ ì¤„ì„ ë¹¼ë©´ ì»´íŒŒì¼ ì—ëŸ¬ ë°œìƒí•¨
};

function shouldUpdateSafe(oldProps: ScatterProps, newProps: ScatterProps) {
  let k: keyof ScatterProps;
  for (k in oldProps) {
    if (oldProps[k] !== newProps[k] && REQUIRES_UPDATE[k]) {
      return true;
    }
  }
  return false;
}
```
